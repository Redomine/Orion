<link href="/assets/styles.css"/>

<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>



<div id="gameDiv">
    <canvas id="ctx" width="800" height="800" style="border:1px solid #000000;"></canvas>
</div>

<script>
	var gameField = document.getElementById("ctx");
    var ctx = document.getElementById("ctx").getContext("2d");
	var socket = io();

	gameField.addEventListener('mousedown' ,onDown, false);

	var img = {};
	img.space = new Image();
	img.space.src = '/img/space.png';

	ctx.font = '12px Arial';
	ctx.fillStyle = "white";
    socket.on('render_map', function(data){
		ctx.clearRect(0,0,800,800);
		ctx.drawImage(img.space,0,0);
		for (i in data.star_systems) {
			img.star = new Image();
			img.star.src = data.star_systems[i][2];	
			star_size = data.star_systems[i][5];
			star_x = data.star_systems[i][3]
			star_y = data.star_systems[i][4]
			ctx.drawImage(img.star,star_x,star_y, star_size, star_size);	
			ctx.fillText(data.star_systems[i][1], star_x,star_y+30);
		}
	})

	function onDown(event) {
		cx = event.pageX;
		cy = event.pageY;
		console.log(cx);
		console.log(cy);
	}

</script>